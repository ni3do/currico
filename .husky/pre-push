#!/bin/sh

# Skip Docker build check if SKIP_DOCKER_CHECK is set
if [ -n "$SKIP_DOCKER_CHECK" ]; then
  echo "‚è≠Ô∏è  Skipping Docker build check (SKIP_DOCKER_CHECK is set)"
  exit 0
fi

echo "üê≥ Testing Docker build..."
echo "üí° Tip: Set SKIP_DOCKER_CHECK=1 to skip this check: SKIP_DOCKER_CHECK=1 git push"

# Test if Docker build succeeds
if docker build -t easy-lehrer-test . > /dev/null 2>&1; then
  echo "‚úÖ Docker build successful"
  # Clean up test image
  docker rmi easy-lehrer-test > /dev/null 2>&1
  exit 0
else
  echo "‚ùå Docker build failed. Please fix the Dockerfile before pushing."
  echo "Run 'docker build -t easy-lehrer-test .' to see the error details."
  echo "To skip this check: SKIP_DOCKER_CHECK=1 git push"
  exit 1
fi
